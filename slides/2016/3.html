<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Skills, Tactics, Plays - Beginner</title>
<meta name="author" content="(Jay Kamat)"/>
<style type="text/css">
.underline { text-decoration: underline; }
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/reveal.js/3.0.0/css/reveal.css"/>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/reveal.js/3.0.0/css/theme/black.css" id="theme"/>


<!-- If the query includes 'print-pdf', include the PDF print sheet -->
<script>
    if( window.location.search.match( /print-pdf/gi ) ) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = 'https://cdn.jsdelivr.net/reveal.js/3.0.0/css/print/pdf.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    }
</script>
</head>
<body>
<div class="reveal">
<div class="slides">
<section id="sec-title-slide"><h1 class="title">Skills, Tactics, Plays - Beginner</h1>
</section>
<section>
<section id="slide-org63dbf0b">
<h2 id="org63dbf0b">Questions about Plays?</h2>
<ul>
<li>Last meeting was pretty dense
<ul>
<li>We <i>NEED</i> to have 1 on 1 time with each of you, so it is <i>your</i> responsibility to waive us over if you're stuck!</li>

</ul></li>
<li>Topics Covered:
<ul>
<li>Python</li>
<li>State Machines</li>
<li>Play/Skill/Tactic Structure</li>

</ul></li>
<li>And today, we're going into&#x2026;</li>

</ul>
</section>
</section>
<section>
<section id="slide-orgfb2376d">
<h2 id="orgfb2376d">Subbehaviors!</h2>
<ul>
<li>A Behavior is a generic name for any skill, play, or tactic.</li>
<li>Last meeting we learned about Plays/Skills/Tactics
<ul>
<li>How do we put them together?</li>

</ul></li>
<li>Subbehaviors allow you to reuse our behaviors in many plays.
<ul>
<li>Example: We have <i>one</i> move play, used by kicker tactics, passing tactics, goalie, etc.</li>

</ul></li>

</ul>
</section>
<section id="slide-org8b4f7d3">
<h3 id="org8b4f7d3">Examples of Subbehaviors</h3>
<ul>
<li>Offense Play contains Passing Tactics, and Move Skills</li>
<li>Passing Tactic Contains Move and Kick Skills</li>

</ul>
</section>
<section id="slide-orgd66c8b7">
<h3 id="orgd66c8b7"><i>Behavior</i> Tree!</h3>
<div class="org-src-container">

<pre  class="src src-text"><code trim>Basic122::running
    Mark::running[robot=4]
        move(0.767296, 6.51286)
        endVelocity(0, 0)
        face(0.160718, 9.15305)
    PivotKick::capturing
        Capture::course_approach[robot=2]
            face(0.160718, 9.15305)
            avoidBall(-1)
            move(0.176939, 9.114)
            endVelocity(0, 0)
    Mark::running[robot=1]
        move(-0.829012, 6.03814)
        endVelocity(0, 0)
        face(0.160718, 9.15305)
</code></pre>
</div>
</section>
<section id="slide-orgac5a2bc">
<h3 id="orgac5a2bc"><i>Behavior</i> Tree! (cont.)</h3>
<div class="org-src-container">

<pre  class="src src-text"><code trim>Basic122::running
    Defense::defending
        SubmissiveDefender::marking
            Move::completed[robot=5]
                face(0.160718, 9.15305)
        SubmissiveDefender::marking
            Move::completed[robot=3]
                face(0.160718, 9.15305)
        SubmissiveGoalie::block
            Move::running[robot=0]
                face(0.160718, 9.15305)
                move(0.290916, 0.14)
                endVelocity(0, 0)
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-orgf4e7618">
<h2 id="orgf4e7618">How do I use subbehaviors?</h2>
<div class="outline-text-2" id="text-orgf4e7618">
</div>
</section>
<section id="slide-org5398c0f">
<h3 id="org5398c0f">Adding Subbehaviors</h3>
<div class="org-src-container">

<pre  class="src src-python"><code trim><span style="color: #598249;">self</span>.add_subbehavior(skill_object,
                     <span style="color: #15968D;">"Name of Subbehavior"</span>,
                     required=<span style="color: #15968D;">False</span> <span style="color: #598249;">or</span> <span style="color: #15968D;">True</span>
                     priority=10) <span style="color: #5e6263;"># </span><span style="color: #5e6263;">A higher number is higher priority</span>
</code></pre>
</div>
</section>
<section id="slide-org2db7eb0">
<h3 id="org2db7eb0">Removing Subbehaviors</h3>
<div class="org-src-container">

<pre  class="src src-python"><code trim><span style="color: #598249;">self</span>.remove_subbehavior(<span style="color: #15968D;">'string name'</span>)

<span style="color: #598249;">self</span>.remove_all_subbehaviors()
</code></pre>
</div>
</section>
<section id="slide-orge93d6d5">
<h3 id="orge93d6d5">Getting Subbehavior Plays</h3>
<div class="org-src-container">

<pre  class="src src-python"><code trim><span style="color: #2F7BDE;">a_subbheavior</span> = <span style="color: #598249;">self</span>.subbehavior_with_name(<span style="color: #15968D;">'string name'</span>)
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org2e80800">
<h2 id="org2e80800">Real Examples</h2>
<div class="outline-text-2" id="text-org2e80800">
</div>
</section>
<section id="slide-orgb1211e6">
<h3 id="orgb1211e6">CoordinatedPass Tactic</h3>
<div class="org-src-container">

<pre  class="src src-python"><code trim><span style="color: #598249;">def</span> <span style="color: #2F7BDE;">on_enter_running</span>(<span style="color: #598249;">self</span>):
    <span style="color: #2F7BDE;">receiver</span> = skills.pass_receive.PassReceive()
    <span style="color: #2F7BDE;">receiver.receive_point</span> = <span style="color: #598249;">self</span>.receive_point
    <span style="color: #598249;">self</span>.add_subbehavior(receiver,
                         <span style="color: #15968D;">'receiver'</span>,
                         required=<span style="color: #598249;">self</span>.receiver_required)

<span style="color: #598249;">def</span> <span style="color: #2F7BDE;">on_exit_running</span>(<span style="color: #598249;">self</span>):
    <span style="color: #598249;">self</span>.remove_subbehavior(<span style="color: #15968D;">'receiver'</span>)
</code></pre>
</div>
</section>
<section id="slide-orgbf691cb">
<h3 id="orgbf691cb">Line Up Tactic</h3>
<ul>
<li>First State Machine is set up, then:</li>

</ul>
<div class="org-src-container">

<pre  class="src src-python"><code trim><span style="color: #5e6263;"># </span><span style="color: #5e6263;">Triggered whenever the line changes</span>
<span style="color: #598249;">self</span>.remove_all_subbehaviors()
<span style="color: #598249;">for</span> i <span style="color: #598249;">in</span> <span style="color: #598249;">range</span>(6):
    <span style="color: #2F7BDE;">pt</span> = <span style="color: #598249;">self</span>._line.get_pt(0) + (<span style="color: #598249;">self</span>.diff * <span style="color: #598249;">float</span>(i))
    <span style="color: #598249;">self</span>.add_subbehavior(
        skills.move.Move(pt),
        name=<span style="color: #15968D;">"robot"</span> + <span style="color: #598249;">str</span>(i),
        required=<span style="color: #15968D;">False</span>,
        priority=6 - i)
</code></pre>
</div>

<div class="org-src-container">

<pre  class="src src-python"><code trim><span style="color: #598249;">def</span> <span style="color: #2F7BDE;">execute_running</span>(<span style="color: #598249;">self</span>):
    <span style="color: #598249;">for</span> i <span style="color: #598249;">in</span> <span style="color: #598249;">range</span>(6):
        <span style="color: #2F7BDE;">pt</span> = <span style="color: #598249;">self</span>._line.get_pt(0) + (<span style="color: #598249;">self</span>.diff * <span style="color: #598249;">float</span>(i))
        <span style="color: #598249;">self</span>.subbehavior_with_name(<span style="color: #15968D;">"robot"</span> + <span style="color: #598249;">str</span>(i))<span style="color: #2F7BDE;">.pos</span> = pt
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org21ae3f3">
<h2 id="org21ae3f3">RoboCup Pro Tip</h2>
<ul>
<li>Find some code doing something like what you want</li>
<li>Tweak it until it works</li>
<li>It's less effective than working everything out, but it's great for beginners!</li>

</ul>
</section>
</section>
<section>
<section id="slide-org136342c">
<h2 id="org136342c">How do I get MY Robot?!?</h2>
<div class="outline-text-2" id="text-org136342c">
</div>
</section>
<section id="slide-org4de10d7">
<h3 id="org4de10d7">Dynamic Assignment</h3>
<ul>
<li>Our role assignment system picks the best robot for the task</li>
<li>You define your constraints, and we'll give you a robot if we can!</li>
<li>It's also some black magic&#x2026;</li>

</ul>
</section>
<section id="slide-orgd010b8c">
<h3 id="orgd010b8c">But I want Robot X!</h3>
<ul>
<li>Override Role Requirements to add your constraints!</li>
<li>This next section is Extra Credit&#x2026;
<ul>
<li>And it's a massive oversimplification</li>
<li>See <code>role_assignment.py</code> for more information.</li>

</ul></li>

</ul>
</section>
<section id="slide-orgdd1d6e6">
<h4 id="orgdd1d6e6">Get the closest robot</h4>
<div class="org-src-container">

<pre  class="src src-python"><code trim><span style="color: #5e6263;"># </span><span style="color: #5e6263;">From Move</span>
<span style="color: #598249;">def</span> <span style="color: #2F7BDE;">role_requirements</span>(<span style="color: #598249;">self</span>):
    <span style="color: #2F7BDE;">reqs</span> = <span style="color: #598249;">super</span>().role_requirements()
    <span style="color: #5e6263;"># </span><span style="color: #5e6263;">Destination Shape is used for distances to points or segments</span>
    <span style="color: #2F7BDE;">reqs.destination_shape</span> = <span style="color: #598249;">self</span>.pos
    <span style="color: #598249;">return</span> reqs
</code></pre>
</div>
</section>
<section id="slide-org38bbec8">
<h4 id="org38bbec8">Get the robot with all the hardware</h4>
<div class="org-src-container">

<pre  class="src src-python"><code trim><span style="color: #598249;">def</span> <span style="color: #2F7BDE;">role_requirements</span>(<span style="color: #598249;">self</span>):
    <span style="color: #2F7BDE;">reqs</span> = <span style="color: #598249;">super</span>().role_requirements()
    <span style="color: #2F7BDE;">reqs.require_kicking</span> = <span style="color: #15968D;">True</span>
    <span style="color: #5e6263;"># </span><span style="color: #5e6263;">try to be near the ball</span>
    <span style="color: #598249;">if</span> main.ball().valid:
        <span style="color: #2F7BDE;">reqs.destination_shape</span> = main.ball().pos
    <span style="color: #598249;">return</span> reqs

</code></pre>
</div>
</section>
<section id="slide-orgaed8a78">
<h4 id="orgaed8a78">I really, really, want MY Robot!</h4>
<div class="org-src-container">

<pre  class="src src-python"><code trim><span style="color: #5e6263;"># </span><span style="color: #5e6263;">From Goalie</span>
<span style="color: #598249;">def</span> <span style="color: #2F7BDE;">role_requirements</span>(<span style="color: #598249;">self</span>):
    <span style="color: #2F7BDE;">reqs</span> = <span style="color: #598249;">super</span>().role_requirements()

    <span style="color: #5e6263;"># </span><span style="color: #5e6263;">This iteration is needed if we have</span>
    <span style="color: #5e6263;"># </span><span style="color: #5e6263;">subbehaviors we want to have applied as well.</span>
    <span style="color: #598249;">for</span> req <span style="color: #598249;">in</span> role_assignment \
        .iterate_role_requirements_tree_leaves(reqs):

        req.required_shell_id \
            = <span style="color: #598249;">self</span>.shell_id <span style="color: #598249;">if</span> <span style="color: #598249;">self</span>.shell_id != <span style="color: #15968D;">None</span> <span style="color: #598249;">else</span> -1
    <span style="color: #598249;">return</span> reqs
</code></pre>
</div>
</section>
</section>
<section>
<section id="slide-org141c411">
<h2 id="org141c411">Assignment</h2>
<ul>
<li>Create a binary clock play</li>
<li>Display the current minute in binary on the field
<ul>
<li>Use a robot to represent a 1, and lack of a robot to represent a 0</li>

</ul></li>
<li>Starter code is in <code>soccer/gameplay/plays/skel/binary_clock.py</code>.</li>
<li>Move it to <code>soccer/gameplay/plays/training</code> to begin.</li>

</ul>
</section>
<section id="slide-org4c26d2e">
<h3 id="org4c26d2e">Tips</h3>
<div class="org-src-container">

<pre  class="src src-python"><code trim><span style="color: #598249;">import</span> time
<span style="color: #2F7BDE;">mins</span> =  time.localtime().tm_min
<span style="color: #2F7BDE;">binary</span> = <span style="color: #598249;">format</span>(mins, <span style="color: #15968D;">'06b'</span>)
<span style="color: #598249;">print</span>(binary)
<span style="color: #5e6263;"># </span><span style="color: #5e6263;">Index with binary[0-6]</span>
<span style="color: #5e6263;"># </span><span style="color: #5e6263;">THIS INDEX IS A CHARACTER VALUE, NOT AN INT</span>
<span style="color: #5e6263;"># </span><span style="color: #5e6263;">USE == '1', not == 1</span>
</code></pre>
</div>

<pre class="example">
110011

</pre>
</section>
</section>
</div>
</div>
<script src="https://cdn.jsdelivr.net/reveal.js/3.0.0/js/reveal.js"></script>

<script>
// Full list of configuration options available here:
// https://github.com/hakimel/reveal.js#configuration
Reveal.initialize({
multiplex: {
    secret: '', // null if client
    id: '', // id, obtained from socket.io server
    url: '' // Location of socket.io server
},

// Optional libraries used to extend on reveal.js
dependencies: [
 { src: 'https://cdn.jsdelivr.net/reveal.js/3.0.0/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
]
});
</script>
</body>
</html>
